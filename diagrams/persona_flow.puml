@startuml

' Блок-схема генерации ответа
title Генерация ответа (answer)

start
:Получение имени собеседника и слухов;

:Получение релевантных мыслей о собеседнике;
:Получение истории диалога;

:Формирование промпта:
- Характеристики персонажа
- Информация о собеседнике
- История диалога
- Доступные слухи;

:Генерация ответа через LLM;

:Извлечение номеров использованных слухов;

:Сохранение сообщения в историю;

stop

@enduml

@startuml

' Блок-схема генерации слуха
title Генерация слуха (generate_rumor)

start
:Получение существующих слухов;

:Формирование промпта:
- Характеристики персонажа
- Существующие слухи
- Инструкции по генерации;

:Генерация слуха через LLM;

:Создание узла слуха:
- ID
- Тип: rumor
- Содержание
- Временная метка;

:Добавление слуха в память;

stop

@enduml 